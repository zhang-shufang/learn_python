- [8 函数](#8-函数)
  - [8.1 函数的定义](#81-函数的定义)
  - [8.2 参数及其传递](#82-参数及其传递)
    - [形参与实参](#形参与实参)
    - [Python中参数的传递方式](#python中参数的传递方式)
    - [传递列表](#传递列表)
  - [8.2 函数的返回值](#82-函数的返回值)
  - [8.3 不定长参数](#83-不定长参数)
  - [8.4 函数编写指南](#84-函数编写指南)
# 8 函数
函数是带名字的代码块，通过使用函数，可以避免编写重复的代码。我们可以根据函数的形参，来传入位置实参，使程序表现出类似但不尽相同的行为。

## 8.1 函数的定义
- 使用 `def` 关键字进行定义，参数可省略，注意 `()` 和 `:` 不能省略。
- 第二行通常使用文档字符串注释来描述函数是做什么的，Python在为程序中的函数生成文档时，会查找紧跟在函数定义后的字符串。
 
演示代码：
```python
def greet_user():
    """显示简单的问候语"""
    print("Hello!")

greet_user()

# 运行结果
Hello！
```

## 8.2 参数及其传递
### 形参与实参
- 形参（parameter）：定义函数时所命名的参数，无实际值。
- 实参（argument）：实际运行时传入函数的参数，有实际值。
### Python中参数的传递方式
- **位置实参**：按照形参的顺序进行传递。传入不需要关键字，但顺序不对会导致期望外的结果。
- **关键字实参**：按照名值对进行传递。传入时需要关键字，不受顺序影响，能明确知道参数的作用。
- **默认值**：定义形参时可以设置默认值，在无实参传入的情况下默认使用该数值。默认值能简化函数的调用以及指出函数的经典用法。
- **可选形参**：形参默认值为空即是可选形参。

```python
# 形参 color 有默认值
def describe_pet(animal, name, color='yellow'):
    """显示宠物的信息"""
    print(f"My {animal}'s name is {name}, color is {color}.")

describe_pet('hamster', 'harry')
describe_pet(name='willie', color='black', animal='dog')

# 运行结果
# My hamster's name is harry, color is yellow.
# My dog's name is willie, color is black.
```
**注意**：当使用默认值时，必须在形参列表中先列出没有默认值的形参，再列出有默认值的形参。这让Python怡然能够正确地解读位置参数。

### 传递列表
- 列表和字典也可作为参数进行传递。
- 传入原始列表，可在函数内对列表进行永久性修改。
- 也可传使用 `list[:]` 传入列表的副本，这样能够避免对原始列表的修改，但是这会导致时间和内存的消耗增加而影响性能。

## 8.2 函数的返回值
演示代码：
```python
def add_if_same_or_sub(x, y):
    if x == y:
        return x + y
    return x - y

val1 = add_if_same_or_sub(5, 2)
val2 = add_if_same_or_sub(2, 2)
print(val1, val2)

# 运行结果
# 3 4
```

## 8.3 不定长参数
- `*args`：以一个星号为前缀，将接受一个包含多余位置参数的元组。
- `**kwargs`：以两个星号为前缀，将接受一个包含多余关键字参数的字典。
- Python先匹配位置实参和关键字实参，最后将余下的实参都收集进最后一个形参中。因此必须在函数定义时将不定长形参放在最后。
  
演示代码：
```python
def func(*args, **kwargs):
    print(f"args: {args}\n kwargs: {kwargs}")

func(1, 2, k='v')

#运行结果
args: (1, 2)
kwargs: {'k': 'v'} 
```

## 8.4 函数编写指南
1. 应该给函数（或模块）指定描述性名称，且只使用小写字母和下划线。（描述性名称可帮助你和别人明白代码想要做什么。）
2. 每个函数都应该包含简要阐述其功能的注释。该注释应紧跟在函数定义后面，并采用文档字符串的格式。（考虑到协作和沟通问题）
3. 在给形参指定默认值时，等号两边不要有空格。函数调用中的关键字实参也应遵守这种约定。
4. 根据 PEP8 ，若形参超过79个字符，可回车并按两次制表符键后，再定义参数，以此和函数主体区分开来。
5. 同一程序或模块中，如果包含多个函数，可使用两个空行将相邻函数区分开。
6. 所有 `import` 语句都应该放在文件开头，除非开头有注释来描述该文件的作用。
   
演示代码：
```python
def function_name(
        parameter_0, parameter_1, parameter_2,
        parameter_3, parameter_4, parameter_5):
        function body...
)
```